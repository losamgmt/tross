
> backend@1.0.0 test
> jest

[dotenv@17.2.3] injecting env (28) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
17:13:03 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}
FAIL integration __tests__/integration/customers-api.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:05 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:06 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [33m‚ö†Ô∏è  GET / ‚Üí 401 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":4,"userRole":"customer","resource":"customers","policy":"own_record_only","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mQuery executed in 27ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:06 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mQuery executed in 43ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:06 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (70ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":2,"userRole":"dispatcher","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:06 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:06 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (24ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:06 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:06 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:06 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (19ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=5","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:07 [32m‚úÖ GET /?page=1&limit=5 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10&search=test","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:07 [32m‚úÖ GET /?page=1&limit=10&search=test ‚Üí 200 (17ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10&sortBy=email&sortOrder=ASC","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:07 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:07 [32m‚úÖ GET /?page=1&limit=10&sortBy=email&sortOrder=ASC ‚Üí 200 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=100","userId":4,"userRole":"customer","resource":"customers","policy":"own_record_only","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:07 [32m‚úÖ GET /?page=1&limit=100 ‚Üí 200 (27ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":1}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  GET /1 ‚Üí 401 (6ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/1","userId":2,"userRole":"dispatcher","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ GET /1 ‚Üí 200 (17ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/99999","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  GET /99999 ‚Üí 404 (15ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/invalid","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"invalid","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  GET /invalid ‚Üí 400 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  POST / ‚Üí 401 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/","userId":4,"userRole":"customer","resource":"customers","operation":"create"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  POST / ‚Üí 403 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/","userId":3,"userRole":"technician","resource":"customers","operation":"create"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  POST / ‚Üí 403 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  POST / ‚Üí 400 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":2}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mAudit event[39m {"userId":1,"action":"create","resourceType":"customer","resourceId":2,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ POST / ‚Üí 201 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":3}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mAudit event[39m {"userId":1,"action":"create","resourceType":"customer","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ POST / ‚Üí 201 (21ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [31mQuery error:[39m {"error":"duplicate key value violates unique constraint \"customers_email_key\"","query":"\n        INSERT INTO customers (\n          email, phone, company_name, billing_address, service_address, status\n        ) VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING *\n      "}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [31mError creating customer[39m {"error":"Customer with this email already exists"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  POST / ‚Üí 500 (15ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  POST / ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  POST / ‚Üí 400 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":5}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mAudit event[39m {"userId":1,"action":"create","resourceType":"customer","resourceId":5,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ POST / ‚Üí 201 (20ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":6}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/6"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  PATCH /6 ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":7}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/7","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer updated[39m {"customerId":7}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mAudit event[39m {"userId":1,"action":"update","resourceType":"customer","resourceId":7,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ PATCH /7 ‚Üí 200 (31ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":8}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/8","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  PATCH /8 ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":9}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/99999","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  PATCH /99999 ‚Üí 404 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":10}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/invalid","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"invalid","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  PATCH /invalid ‚Üí 400 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":11}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/11","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  PATCH /11 ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":12}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/12","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer updated[39m {"customerId":12}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mAudit event[39m {"userId":1,"action":"update","resourceType":"customer","resourceId":12,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ PATCH /12 ‚Üí 200 (31ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":13}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/13"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  DELETE /13 ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":14}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/14","userId":2,"userRole":"dispatcher","resource":"customers","operation":"delete"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  DELETE /14 ‚Üí 403 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":15}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer deactivated[39m {"customerId":15}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mAudit event[39m {"userId":5,"action":"deactivate","resourceType":"customer","resourceId":15,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ DELETE /15 ‚Üí 200 (22ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":16}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer deactivated[39m {"customerId":16}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mAudit event[39m {"userId":1,"action":"deactivate","resourceType":"customer","resourceId":16,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32m‚úÖ DELETE /16 ‚Üí 200 (22ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":17}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  DELETE /99999 ‚Üí 404 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [32mCustomer created[39m {"customerId":18}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"invalid","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33m‚ö†Ô∏è  DELETE /invalid ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=100","userId":4,"userRole":"customer","resource":"customers","policy":"own_record_only","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:07 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 23ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:07 [32m‚úÖ GET /?page=1&limit=100 ‚Üí 200 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=100","userId":1,"userRole":"admin","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:07 [32m‚úÖ GET /?page=1&limit=100 ‚Üí 200 (24ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=100","userId":2,"userRole":"dispatcher","resource":"customers","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:07 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:07 [32m‚úÖ GET /?page=1&limit=100 ‚Üí 200 (17ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:07 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ POST /api/customers - Create Customer ‚Ä∫ should create customer with valid data as dispatcher

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 285 |[39m
     [90m 286 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 287 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 288 |[39m       expect(response[33m.[39mbody)[33m.[39mtoMatchObject({
     [90m 289 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 290 |[39m         data[33m:[39m expect[33m.[39mobjectContaining({[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:287:31)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ POST /api/customers - Create Customer ‚Ä∫ should reject duplicate email

    expect(received).toBe(expected) // Object.is equality

    Expected: 409
    Received: 500

    [0m [90m 331 |[39m
     [90m 332 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 333 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m409[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already exists'[39m)[33m;[39m
     [90m 335 |[39m     })[33m;[39m
     [90m 336 |[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:333:31)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ POST /api/customers - Create Customer ‚Ä∫ should trim whitespace from email

    expect(received).toBe(expected) // Object.is equality

    Expected: "trim-1763169187457@example.com"
    Received: "  trim-1763169187457@example.com  "

    [0m [90m 369 |[39m       [90m// Assert[39m
     [90m 370 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 371 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39memail)[33m.[39mtoBe(trimEmail)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 372 |[39m     })[33m;[39m
     [90m 373 |[39m   })[33m;[39m
     [90m 374 |[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:371:40)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ PATCH /api/customers/:id - Update Customer ‚Ä∫ should update multiple fields

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 400

    [0m [90m 426 |[39m
     [90m 427 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 428 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 429 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m 430 |[39m         phone[33m:[39m [32m'555-9999'[39m[33m,[39m
     [90m 431 |[39m         company_name[33m:[39m [32m'Multi-Update Company'[39m[33m,[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:428:31)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ PATCH /api/customers/:id - Update Customer ‚Ä∫ should trim whitespace from updated fields

    expect(received).toBe(expected) // Object.is equality

    Expected: "Trimmed Company"
    Received: "  Trimmed Company  "

    [0m [90m 475 |[39m       [90m// Assert[39m
     [90m 476 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 477 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mcompany_name)[33m.[39mtoBe([32m'Trimmed Company'[39m)[33m;[39m
     [90m     |[39m                                               [31m[1m^[22m[39m
     [90m 478 |[39m     })[33m;[39m
     [90m 479 |[39m   })[33m;[39m
     [90m 480 |[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:477:47)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ DELETE /api/customers/:id - Delete Customer ‚Ä∫ should soft delete customer as manager

    expect(received).toMatchObject(expected)

    - Expected  - 1
    + Received  + 1

      Object {
    -   "message": StringContaining "deleted",
    +   "message": "Customer deactivated successfully",
        "success": true,
        "timestamp": Any<String>,
      }

    [0m [90m 519 |[39m       [90m// Assert[39m
     [90m 520 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 521 |[39m       expect(response[33m.[39mbody)[33m.[39mtoMatchObject({
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 522 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 523 |[39m         message[33m:[39m expect[33m.[39mstringContaining([32m'deleted'[39m)[33m,[39m
     [90m 524 |[39m         timestamp[33m:[39m expect[33m.[39many([33mString[39m)[33m,[39m[0m

      at Object.toMatchObject (__tests__/integration/customers-api.test.js:521:29)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ RLS (Row-Level Security) - Customer Access ‚Ä∫ should not apply RLS filtering for admin role

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 581 |[39m       [90m// Assert[39m
     [90m 582 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 583 |[39m       expect(response[33m.[39mbody[33m.[39mrlsApplied)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 584 |[39m     })[33m;[39m
     [90m 585 |[39m
     [90m 586 |[39m     it([32m'should apply RLS filtering for dispatcher role (all_records policy)'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:583:40)

FAIL unit __tests__/unit/models/Customer.rls.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (../node_modules/dotenv/lib/main.js:142:11)

  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should apply RLS filter for customer role

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:267:22)

  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should not filter for technician+ (all_records)

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:290:22)

  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS when req not provided

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:305:22)

  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should combine RLS with search and filters

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:334:22)

FAIL unit __tests__/unit/models/Contract.rls.test.js
  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:231:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:246:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_contracts_only RLS policy (customer)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:258:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply null policy (technician - no access)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:272:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine customer RLS with search and filters

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:297:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine null policy with filters (technician blocked)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:321:37)

FAIL unit __tests__/unit/models/Invoice.rls.test.js
  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:231:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:246:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_invoices_only RLS policy (customer)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:258:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply null policy (technician - no access)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:272:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine customer RLS with search and filters

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:297:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine null policy with filters (technician blocked)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:321:22)

FAIL unit __tests__/unit/models/WorkOrder.rls.test.js
  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:257:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:272:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_work_orders_only RLS policy (customer)

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:284:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply assigned_work_orders_only RLS policy (technician)

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:299:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine customer RLS with search and filters

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:324:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine technician RLS with search and filters

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:353:22)

FAIL unit __tests__/unit/models/Technician.rls.test.js
  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:201:22)

  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:216:22)

  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_record_only RLS policy

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:228:22)

  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine RLS with search and filters

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:254:22)

FAIL unit __tests__/unit/models/Inventory.rls.test.js
  ‚óè Inventory Model - Row-Level Security ‚Ä∫ findAll with RLS ‚Ä∫ should fetch all inventory without filtering (null policy)

    Failed to retrieve inventory items

    [0m [90m 158 |[39m     } [36mcatch[39m (error) {
     [90m 159 |[39m       logger[33m.[39merror([32m'Error finding inventory items'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve inventory items'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 161 |[39m     }
     [90m 162 |[39m   }
     [90m 163 |[39m[0m

      at Inventory.findAll (db/models/Inventory.js:160:13)
      at Object.findAll (__tests__/unit/models/Inventory.rls.test.js:255:38)

  ‚óè Inventory Model - Row-Level Security ‚Ä∫ findAll with RLS ‚Ä∫ should fetch all inventory without req (backward compatibility)

    Failed to retrieve inventory items

    [0m [90m 158 |[39m     } [36mcatch[39m (error) {
     [90m 159 |[39m       logger[33m.[39merror([32m'Error finding inventory items'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve inventory items'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 161 |[39m     }
     [90m 162 |[39m   }
     [90m 163 |[39m[0m

      at Inventory.findAll (db/models/Inventory.js:160:13)
      at Object.findAll (__tests__/unit/models/Inventory.rls.test.js:270:38)

  ‚óè Inventory Model - Row-Level Security ‚Ä∫ findAll with RLS ‚Ä∫ should work with search and filters (no RLS interference)

    Failed to retrieve inventory items

    [0m [90m 158 |[39m     } [36mcatch[39m (error) {
     [90m 159 |[39m       logger[33m.[39merror([32m'Error finding inventory items'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve inventory items'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 161 |[39m     }
     [90m 162 |[39m   }
     [90m 163 |[39m[0m

      at Inventory.findAll (db/models/Inventory.js:160:13)
      at Object.findAll (__tests__/unit/models/Inventory.rls.test.js:289:38)

PASS integration __tests__/integration/timeout.test.js (11.055 s)
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:10 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:10 [32müîß Dev auth: Generated token for admin@trossapp.dev (admin)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [32müîß Dev auth: Generated token for admin@trossapp.dev (admin)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [32m‚úÖ GET /token?role=admin ‚Üí 200 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 24ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [32m‚úÖ GET / ‚Üí 200 (22ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 64ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (66ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 36ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (39ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 35ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (37ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 37ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (40ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 39ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (41ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 38ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (41ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 121ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (124ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 111ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (113ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 122ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (124ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mQuery executed in 141ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:10 [32m‚úÖ GET /api/health ‚Üí 200 (143ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:10 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:11 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:11 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:11 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:11 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [31mQuery error:[39m {"error":"Query read timeout","query":"SELECT pg_sleep(30)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mQuery executed in 30ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:20 [32m‚úÖ GET /api/health ‚Üí 200 (35ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mQuery executed in 31ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:20 [32m‚úÖ GET /api/health ‚Üí 200 (34ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mQuery executed in 47ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mQuery executed in 44ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:20 [32m‚úÖ GET /api/health ‚Üí 200 (48ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [32m‚úÖ GET / ‚Üí 200 (64ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:20 [34mQuery executed in 21ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:20 [32m‚úÖ GET /api/health ‚Üí 200 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/db/token-service-db.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:21 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [32mToken pair generated[39m {"userId":1,"tokenId":"7f7c8f2a-2693-4337-a587-dc8ab3796a39","ipAddress":"127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [31mQuery error:[39m {"error":"insert or update on table \"refresh_tokens\" violates foreign key constraint \"refresh_tokens_user_id_fkey\"","query":"INSERT INTO refresh_tokens \n         (token_id, user_id, token_hash, expires_at, ip_address, user_agent)\n         VALUES ($1, $2, $3, $4, $5, $6)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [31mError generating token pair[39m {"error":"insert or update on table \"refresh_tokens\" violates foreign key constraint \"refresh_tokens_user_id_fkey\"","userId":99999}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [32mToken pair generated[39m {"userId":1,"tokenId":"34d26dc3-d89a-48b4-a7e0-4694ceced883","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [32mToken pair generated[39m {"userId":1,"tokenId":"3697d4bc-defe-46c2-8f9b-e396b9544e26","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [32mToken pair generated[39m {"userId":1,"tokenId":"85a12931-ef96-47a4-a651-7ba4068cc660","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [32mToken pair generated[39m {"userId":1,"tokenId":"971314f6-a0fb-4447-97b8-a6314f26496e","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:21 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"f670dcf5-acd6-40db-be9f-90336cb11446","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"c7ddcd9a-5f2f-446f-8d2d-7a4c9ca52f60","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"23561980-4b38-40f0-9564-fbf3e0956074","ipAddress":"192.168.1.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mRefresh token revoked[39m {"tokenId":"c7ddcd9a-5f2f-446f-8d2d-7a4c9ca52f60","reason":"rotated"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mAccess token refreshed[39m {"userId":1,"oldTokenId":"c7ddcd9a-5f2f-446f-8d2d-7a4c9ca52f60","ipAddress":"192.168.1.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"eb1488da-27fd-4fbc-ad8f-53d6f3bf2148","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"149958d6-1a96-4fab-a919-13df82956ff9","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mRefresh token revoked[39m {"tokenId":"eb1488da-27fd-4fbc-ad8f-53d6f3bf2148","reason":"rotated"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mAccess token refreshed[39m {"userId":1,"oldTokenId":"eb1488da-27fd-4fbc-ad8f-53d6f3bf2148","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"3387b00c-cf75-4eeb-87c5-dd2d3c6b3ae5","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [33mRefresh token not found or invalid[39m {"tokenId":"3387b00c-cf75-4eeb-87c5-dd2d3c6b3ae5","userId":1}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [31mError refreshing token[39m {"error":"Invalid refresh token"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"f41a0b17-c1e1-49d7-8d97-eb7424650d50","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [33mRefresh token not found or invalid[39m {"tokenId":"f41a0b17-c1e1-49d7-8d97-eb7424650d50","userId":1}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [31mError refreshing token[39m {"error":"Invalid refresh token"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [32mToken pair generated[39m {"userId":1,"tokenId":"2b68ebb4-8016-4a0a-9b4b-f5e63d4e78df","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [31mRefresh token hash mismatch[39m {"tokenId":"2b68ebb4-8016-4a0a-9b4b-f5e63d4e78df","userId":1}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [31mError refreshing token[39m {"error":"Invalid refresh token"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:22 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"198820f4-35d6-4359-9b18-ad408df7af73","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mRefresh token revoked[39m {"tokenId":"198820f4-35d6-4359-9b18-ad408df7af73","reason":"user_logout"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"94d86cff-5a15-4008-8c47-6f2739de5fa9","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"21034ddf-1ab5-466a-ac53-ce598757f215","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"ff6acceb-98b5-496c-b554-79c826e6c153","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mAll user tokens revoked[39m {"userId":1,"reason":"security_breach","count":3}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mAll user tokens revoked[39m {"userId":1,"reason":"logout_all","count":0}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"bc6c3acc-a3d7-4389-943d-46808800f59c","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mExpired tokens cleaned up[39m {"count":1}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"ac28f64c-837c-47f7-9ab9-28c19d85282f","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"1d976447-2a99-4631-b9f3-b3bbf8dc5f58","ipAddress":"127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"a54b45a9-e22a-4b5c-9de3-92170216a6e5","ipAddress":"192.168.1.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"af8f26ef-fe27-4f40-9555-3a05e24065c6","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:23 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 35ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"f08fbeb5-ba46-4d92-81cd-f2d513100eb6","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:23 [34mQuery executed in 35ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"70c84e71-1870-4237-ae0a-090788051c29","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:23 [34mQuery executed in 37ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"3060bc51-9f0d-494d-a239-18d09857ff4f","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:23 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      17:13:23 [32mToken pair generated[39m {"userId":1,"tokenId":"558d5a27-d129-4f95-817b-d7d7c6af111d","ipAddress":null}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      17:13:23 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/db/role-crud-db.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:24 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:24 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [32mAudit event[39m {"userId":2,"action":"role_create","resourceType":"role","resourceId":6,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [32m‚úÖ POST / ‚Üí 201 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":7,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [32m‚úÖ POST / ‚Üí 201 (41ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":8,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [32m‚úÖ POST / ‚Üí 201 (34ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [31mQuery error:[39m {"error":"duplicate key value violates unique constraint \"roles_name_key\"","query":"\n        INSERT INTO roles (name, priority)\n        VALUES ($1, $2)\n        RETURNING *\n      "}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [31mError creating role[39m {"error":"Role name already exists","roleName":"test_analyst_1763169204824_zn89d"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [33m‚ö†Ô∏è  POST / ‚Üí 409 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [33m‚ö†Ô∏è  POST / ‚Üí 400 (32ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:24 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  POST / ‚Üí 400 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/","userId":1,"userRole":"client","resource":"roles","operation":"create"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  POST / ‚Üí 403 (23ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  POST / ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_update","resourceType":"role","resourceId":6,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ PUT /6 ‚Üí 200 (47ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_update","resourceType":"role","resourceId":6,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ PUT /6 ‚Üí 200 (42ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":10,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ POST / ‚Üí 201 (34ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [31mQuery error:[39m {"error":"duplicate key value violates unique constraint \"roles_name_key\"","query":"\n        UPDATE roles \n        SET name = $1\n        WHERE id = $2\n        RETURNING *\n      "}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [31mError updating role[39m {"error":"Role name already exists","roleId":"6"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  PUT /6 ‚Üí 409 (22ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 10ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  PUT /6 ‚Üí 400 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  PUT /99999 ‚Üí 404 (27ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [31mError updating role[39m {"error":"Cannot modify protected role","roleId":"1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  PUT /1 ‚Üí 400 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [31mError updating role[39m {"error":"Cannot modify protected role","roleId":"5"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  PUT /5 ‚Üí 400 (32ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/6","userId":1,"userRole":"client","resource":"roles","operation":"update"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  PUT /6 ‚Üí 403 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":11,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ POST / ‚Üí 201 (34ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_delete","resourceType":"role","resourceId":11,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ DELETE /11 ‚Üí 200 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":12,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ POST / ‚Üí 201 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [31mError deleting role[39m {"error":"Role not found","roleId":"99999"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  DELETE /99999 ‚Üí 404 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":13,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ POST / ‚Üí 201 (34ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [31mError deleting role[39m {"error":"Cannot delete protected role","roleId":"1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  DELETE /1 ‚Üí 400 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":14,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [32m‚úÖ POST / ‚Üí 201 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [31mError deleting role[39m {"error":"Cannot delete protected role","roleId":"5"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:25 [33m‚ö†Ô∏è  DELETE /5 ‚Üí 400 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":15,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":16,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-user-role_1763169206088_2ky7n@test.com",
        "first_name": "User",
        "last_name": "WithRole",
        "role_id": 16
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169204647@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":2,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (28ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [31mError deleting role[39m {"error":"Cannot delete role: 1 user(s) are assigned to this role. Use force=true to proceed and set their role to NULL.","roleId":"16"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [33m‚ö†Ô∏è  DELETE /16 ‚Üí 400 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":17,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (37ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/17","userId":2,"userRole":"client","resource":"roles","operation":"delete"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [33m‚ö†Ô∏è  DELETE /17 ‚Üí 403 (21ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":18,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (32ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/18"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [33m‚ö†Ô∏è  DELETE /18 ‚Üí 401 (4ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":19,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":20,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_update","resourceType":"role","resourceId":20,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ PUT /20 ‚Üí 200 (27ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":21,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ POST / ‚Üí 201 (32ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32mAudit event[39m {"userId":1,"action":"role_delete","resourceType":"role","resourceId":21,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [32m‚úÖ DELETE /21 ‚Üí 200 (31ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:26 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/users-api.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:27 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:27 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  GET / ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":2,"userRole":"technician","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (22ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=5","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ GET /?page=1&limit=5 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10&search=undefined","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ GET /?page=1&limit=10&search=undefined ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10&sortBy=email&sortOrder=ASC","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ GET /?page=1&limit=10&sortBy=email&sortOrder=ASC ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/undefined"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  GET /undefined ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/undefined","userId":2,"userRole":"technician","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"undefined","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  GET /undefined ‚Üí 400 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/undefined","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"undefined","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  GET /undefined ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/99999","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  GET /99999 ‚Üí 404 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/invalid","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"invalid","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  GET /invalid ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  POST / ‚Üí 401 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/","userId":2,"userRole":"technician","resource":"users","operation":"create"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  POST / ‚Üí 403 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169207821@example.com",
        "first_name": "New",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169207426@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ POST / ‚Üí 201 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169207859@example.com",
        "first_name": "Client",
        "last_name": "User",
        "role_id": 5
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169207426@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":4,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ POST / ‚Üí 201 (22ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169207896@example.com",
        "first_name": "First",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169207426@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":5,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [32m‚úÖ POST / ‚Üí 201 (27ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169207896@example.com",
        "first_name": "Second",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169207426@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [31mQuery error:[39m {"error":"duplicate key value violates unique constraint \"users_email_key\"","query":"\n        INSERT INTO users (email, first_name, last_name, role_id, auth0_id, status) \n        VALUES ($1, $2, $3, $4, $5, $6) \n        RETURNING *\n      "}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [31mError creating user[39m {"error":"duplicate key value violates unique constraint \"users_email_key\"","email":"test-1763169207896@example.com"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [31mError creating user[39m {"error":"Email already exists","email":"test-1763169207896@example.com"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [33m‚ö†Ô∏è  POST / ‚Üí 409 (20ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:27 [34mQuery executed in 24ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "invalid-email",
        "first_name": "Test",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169207426@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:27 [33m‚ö†Ô∏è  POST / ‚Üí 400 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "first_name": "Test",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169207426@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:28 [33m‚ö†Ô∏è  POST / ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "  test-1763169208019@example.com  ",
        "first_name": "  Whitespace  ",
        "last_name": "  Test  "
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169207426@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":7,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ POST / ‚Üí 201 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/8"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /8 ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/9","userId":2,"userRole":"technician","resource":"users","operation":"update"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /9 ‚Üí 403 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"user_update","resourceType":"user","resourceId":10,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ PUT /10 ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"user_update","resourceType":"user","resourceId":11,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ PUT /11 ‚Üí 200 (28ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"user_update","resourceType":"user","resourceId":12,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ PUT /12 ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /99999 ‚Üí 404 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"user_update","resourceType":"user","resourceId":14,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ PUT /14 ‚Üí 200 (28ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/14","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ GET /14 ‚Üí 200 (15ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/15/role"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /15/role ‚Üí 401 (4ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/16/role","userId":2,"userRole":"technician","resource":"users","operation":"update"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /16/role ‚Üí 403 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":17,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ PUT /17/role ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [31mError setting user role[39m {"error":"User not found","userId":99999,"roleId":2}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [31mError assigning role[39m {"error":"User not found","userId":"99999","roleId":2}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /99999/role ‚Üí 500 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /19/role ‚Üí 404 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  PUT /20/role ‚Üí 400 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/21"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  DELETE /21 ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/22","userId":2,"userRole":"technician","resource":"users","operation":"delete"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  DELETE /22 ‚Üí 403 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"user_delete","resourceType":"user","resourceId":23,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ DELETE /23 ‚Üí 200 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  DELETE /99999 ‚Üí 404 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"undefined","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  DELETE /undefined ‚Üí 400 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 2ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32mAudit event[39m {"userId":1,"action":"user_delete","resourceType":"user","resourceId":26,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ DELETE /26 ‚Üí 200 (21ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/26","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  GET /26 ‚Üí 404 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (19ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  GET / ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"limit","valueType":"undefined","reason":"Field is required but received undefined"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"validatePagination","field":"pagination","value":"{}","valueType":"object","reason":"limit is required","url":"/","method":"GET"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33m‚ö†Ô∏è  GET / ‚Üí 400 (12ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 22ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:28 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (39ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 62ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 58ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 61ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 80ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [33mSecurity Event[39m {"event":"RLS_POLICY_APPLIED","url":"/?page=1&limit=10","userId":1,"userRole":"admin","resource":"users","policy":"all_records","severity":"DEBUG"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 20ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (100ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (99ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (102ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (120ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/roles-api.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:29 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:29 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [33m‚ö†Ô∏è  GET / ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:29 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (21ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (17ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /?page=1&limit=3 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /?page=1&limit=10&sortBy=name&sortOrder=ASC ‚Üí 200 (20ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  GET /1 ‚Üí 401 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /?page=1&limit=1 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /7 ‚Üí 200 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  GET /99999 ‚Üí 404 (12ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  Validation failure[39m {"validator":"toSafeInteger","field":"id","value":"invalid","valueType":"string","reason":"Cannot convert to integer (parsed as NaN)"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  GET /invalid ‚Üí 400 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/1/users"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  GET /1/users ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /?page=1&limit=1 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /7/users?page=1&limit=10 ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  POST / ‚Üí 401 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/","userId":2,"userRole":"technician","resource":"roles","operation":"create"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  POST / ‚Üí 403 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":22,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ POST / ‚Üí 201 (35ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32mAudit event[39m {"userId":1,"action":"role_create","resourceType":"role","resourceId":23,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ POST / ‚Üí 201 (20ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [31mQuery error:[39m {"error":"duplicate key value violates unique constraint \"roles_name_key\"","query":"\n        INSERT INTO roles (name, priority)\n        VALUES ($1, $2)\n        RETURNING *\n      "}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [31mError creating role[39m {"error":"Role name already exists","roleName":"test-role-1763169210385"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  POST / ‚Üí 409 (16ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 28ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  POST / ‚Üí 400 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  POST / ‚Üí 400 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/25"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  PUT /25 ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/26","userId":2,"userRole":"technician","resource":"roles","operation":"update"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  PUT /26 ‚Üí 403 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32mAudit event[39m {"userId":1,"action":"role_update","resourceType":"role","resourceId":27,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ PUT /27 ‚Üí 200 (31ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32mAudit event[39m {"userId":1,"action":"role_update","resourceType":"role","resourceId":28,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ PUT /28 ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  PUT /99999 ‚Üí 404 (15ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32mAudit event[39m {"userId":1,"action":"role_update","resourceType":"role","resourceId":30,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ PUT /30 ‚Üí 200 (27ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /30 ‚Üí 200 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/31"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  DELETE /31 ‚Üí 401 (6ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/32","userId":2,"userRole":"technician","resource":"roles","operation":"delete"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  DELETE /32 ‚Üí 403 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32mAudit event[39m {"userId":1,"action":"role_delete","resourceType":"role","resourceId":33,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ DELETE /33 ‚Üí 200 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [31mError deleting role[39m {"error":"Role not found","roleId":"99999"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  DELETE /99999 ‚Üí 404 (17ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32mAudit event[39m {"userId":1,"action":"role_delete","resourceType":"role","resourceId":35,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ DELETE /35 ‚Üí 200 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33m‚ö†Ô∏è  GET /35 ‚Üí 404 (27ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:30 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [33m‚ö†Ô∏è  GET / ‚Üí 401 (6ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (19ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (17ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 23ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (37ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 45ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 65ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 59ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 71ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (74ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (96ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (91ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET /?page=1&limit=10 ‚Üí 200 (103ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/schema-api.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:31 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:31 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [34mQuery executed in 18ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:31 [32m‚úÖ GET / ‚Üí 200 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [33m‚ö†Ô∏è  GET / ‚Üí 401 (6ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 23ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (34ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 60ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 54ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 52ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 66ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (80ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 19ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (76ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 21ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (78ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 23ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (94ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 18ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 20ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 30ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /users ‚Üí 200 (41ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 18ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 20ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /roles ‚Üí 200 (31ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 16ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 18ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /nonexistent_table ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/users"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [33m‚ö†Ô∏è  GET /users ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 10ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 22ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /users ‚Üí 200 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 16ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 22ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /users ‚Üí 200 (35ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 10ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 22ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /users ‚Üí 200 (33ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 10ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 27ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /users ‚Üí 200 (38ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 10ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 20ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /users ‚Üí 200 (31ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 18ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /roles ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 10ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 14ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 21ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 16ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET /users/options/role_id ‚Üí 200 (56ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/users/options/role_id"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [33m‚ö†Ô∏è  GET /users/options/role_id ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 20ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [33m‚ö†Ô∏è  GET /users/options/email ‚Üí 400 (31ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [33m‚ö†Ô∏è  GET /nonexistent/options/column ‚Üí 400 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 10ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 29ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 16ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET /users/options/role_id ‚Üí 200 (64ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 20ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 16ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET /users/options/role_id ‚Üí 200 (53ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [32m‚úÖ GET / ‚Üí 200 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 19ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [32m‚úÖ GET /users ‚Üí 200 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:32 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:32 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:32 [34mQuery executed in 20ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:32 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:33 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:33 [34mQuery executed in 16ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [32m‚úÖ GET /users/options/role_id ‚Üí 200 (54ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [32m‚úÖ GET / ‚Üí 200 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [32m‚úÖ GET / ‚Üí 200 (32ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 19ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 22ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 25ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:33 [34mQuery executed in 22ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [34mQuery executed in 24ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:33 [34mQuery executed in 25ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:33 [34mQuery executed in 34ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:33 [32m‚úÖ GET /users ‚Üí 200 (50ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 32ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 9ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      17:13:33 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [34mQuery executed in 13ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      17:13:33 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [32m‚úÖ GET /users/options/role_id ‚Üí 200 (77ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/health-api.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:33 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:33 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 23ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [32m‚úÖ GET /api/health ‚Üí 200 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [32m‚úÖ GET /api/health ‚Üí 200 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [32m‚úÖ GET /api/health ‚Üí 200 (17ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:33 [32m‚úÖ GET /api/health ‚Üí 200 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:33 [32m‚úÖ GET /databases ‚Üí 200 (18ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/databases"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [33m‚ö†Ô∏è  GET /databases ‚Üí 401 (7ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (15ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (15ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 68ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (74ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 39ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (42ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 42ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (45ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 44ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (46ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 46ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (48ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 46ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (48ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 121ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (123ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 133ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (135ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 145ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (147ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 126ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (128ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 19ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 19ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 19ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 15ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 12ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (36ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 26ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (40ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (39ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (36ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 17ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (47ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [32m‚úÖ GET /databases ‚Üí 200 (12ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:34 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      17:13:34 [32m‚úÖ GET /api/health ‚Üí 200 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS unit __tests__/unit/services/token-service.test.js
PASS integration __tests__/integration/auth-api.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:36 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:36 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/me"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33m‚ö†Ô∏è  GET /me ‚Üí 401 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ GET /me ‚Üí 200 (16ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ GET /me ‚Üí 200 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ GET /me ‚Üí 200 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ GET /me ‚Üí 200 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ GET /me ‚Üí 200 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33mSecurity Event[39m {"event":"AUTH_INVALID_TOKEN","url":"/me","error":"invalid token"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33m‚ö†Ô∏è  GET /me ‚Üí 403 (6ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/me"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33m‚ö†Ô∏è  PUT /me ‚Üí 401 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ PUT /me ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ PUT /me ‚Üí 200 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [32m‚úÖ PUT /me ‚Üí 200 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33m‚ö†Ô∏è  PUT /me ‚Üí 400 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [33m‚ö†Ô∏è  PUT /me ‚Üí 400 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:36 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33m‚ö†Ô∏è  PUT /me ‚Üí 400 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ PUT /me ‚Üí 200 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ PUT /me ‚Üí 200 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33m‚ö†Ô∏è  PUT /me ‚Üí 400 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ PUT /me ‚Üí 200 (28ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/me"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33m‚ö†Ô∏è  GET /me ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/me"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33m‚ö†Ô∏è  GET /me ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (7ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 23ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (25ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 37ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (40ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 54ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (56ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 46ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (49ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 60ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (61ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ GET /me ‚Üí 200 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ PUT /me ‚Üí 200 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [32m‚úÖ PUT /me ‚Üí 200 (28ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/me"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33m‚ö†Ô∏è  GET /me ‚Üí 401 (7ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/me"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33m‚ö†Ô∏è  GET /me ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/me"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [33m‚ö†Ô∏è  GET /me ‚Üí 401 (4ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:37 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/db/user-crud-lifecycle.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:37 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:38 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169218184-2w45dpi1s@test.com",
        "first_name": "Lifecycle",
        "last_name": "Test"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ POST / ‚Üí 201 (36ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_update","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ PUT /3 ‚Üí 200 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_delete","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ DELETE /3 ‚Üí 200 (26ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169218331-fh7l3j4gi@test.com",
        "first_name": "First",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":4,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ POST / ‚Üí 201 (28ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169218331-fh7l3j4gi@test.com",
        "first_name": "Second",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [31mQuery error:[39m {"error":"duplicate key value violates unique constraint \"users_email_key\"","query":"\n        INSERT INTO users (email, first_name, last_name, role_id, auth0_id, status) \n        VALUES ($1, $2, $3, $4, $5, $6) \n        RETURNING *\n      "}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [31mError creating user[39m {"error":"duplicate key value violates unique constraint \"users_email_key\"","email":"test-1763169218331-fh7l3j4gi@test.com"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [31mError creating user[39m {"error":"Email already exists","email":"test-1763169218331-fh7l3j4gi@test.com"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  POST / ‚Üí 409 (20ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient removed from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 30ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "first_name": "No",
        "last_name": "Email"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [33m‚ö†Ô∏è  POST / ‚Üí 400 (34ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169218443-mp7obcz0o@test.com",
        "first_name": "Test",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":6,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ POST / ‚Üí 201 (30ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  PUT /6 ‚Üí 400 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  PUT /99999 ‚Üí 404 (14ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  DELETE /99999 ‚Üí 404 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  DELETE /1 ‚Üí 400 (8ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/","userId":2,"userRole":"client","resource":"users","operation":"create"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  POST / ‚Üí 403 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  POST / ‚Üí 401 (5ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169218600-lgfyu26gt@test.com",
        "first_name": "Test",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":7,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ POST / ‚Üí 201 (28ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/7","userId":2,"userRole":"client","resource":"users","operation":"update"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  PUT /7 ‚Üí 403 (10ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169218654-qcllqzfwy@test.com",
        "first_name": "Test",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":8,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ POST / ‚Üí 201 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/8","userId":2,"userRole":"client","resource":"users","operation":"delete"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  DELETE /8 ‚Üí 403 (9ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-1763169218708-fqsmcy9hi@test.com",
        "first_name": "Test",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169218117@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":9,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [32m‚úÖ POST / ‚Üí 201 (29ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/9"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [33m‚ö†Ô∏è  DELETE /9 ‚Üí 401 (6ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:38 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS integration __tests__/integration/db/user-role-assignment.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:39 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:39 [34mNew database client connected to pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "test-user_1763169219512_uf9np@test.com",
        "first_name": "Role",
        "last_name": "Test"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169219445@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32m‚úÖ POST / ‚Üí 201 (49ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 3ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32m‚úÖ PUT /3/role ‚Üí 200 (44ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 11ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32m‚úÖ PUT /3/role ‚Üí 200 (47ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32m‚úÖ PUT /3/role ‚Üí 200 (43ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [33m‚ö†Ô∏è  PUT /3/role ‚Üí 404 (21ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [33m‚ö†Ô∏è  PUT /3/role ‚Üí 400 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [33mSecurity Event[39m {"event":"AUTH_INSUFFICIENT_PERMISSION","url":"/3/role","userId":2,"userRole":"client","resource":"users","operation":"update"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [33m‚ö†Ô∏è  PUT /3/role ‚Üí 403 (13ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [33mSecurity Event[39m {"event":"AUTH_MISSING_TOKEN","url":"/3/role"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [33m‚ö†Ô∏è  PUT /3/role ‚Üí 401 (7ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":3,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32m‚úÖ PUT /3/role ‚Üí 200 (41ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "workflow_1763169219939_r8yhl@test.com",
        "first_name": "Workflow",
        "last_name": "Test"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: test-1763169219445@test.com

      at log (routes/users.js:339:13)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32mAudit event[39m {"userId":1,"action":"user_create","resourceType":"user","resourceId":4,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [32m‚úÖ POST / ‚Üí 201 (36ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:39 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":4,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [32m‚úÖ PUT /4/role ‚Üí 200 (39ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 7ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":4,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [32m‚úÖ PUT /4/role ‚Üí 200 (48ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 8ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [32mAudit event[39m {"userId":1,"action":"role_assign","resourceType":"user","resourceId":4,"result":"success","ipAddress":"::ffff:127.0.0.1"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [32m‚úÖ PUT /4/role ‚Üí 200 (46ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 5ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 4ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [31mError setting user role[39m {"error":"User not found","userId":99999,"roleId":2}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [31mError assigning role[39m {"error":"User not found","userId":"99999","roleId":2}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [33m‚ö†Ô∏è  PUT /99999/role ‚Üí 500 (24ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mQuery executed in 6ms[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [33m‚ö†Ô∏è  PUT /3/role ‚Üí 400 (11ms)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:40 [34mClient acquired from pool[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS unit __tests__/unit/routes/auth.validation.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS integration __tests__/integration/auth-flow.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      17:13:41 [32müß™ Using TEST database[39m {"host":"127.0.0.1","port":5433,"database":"trossapp_test"}

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      17:13:41 [32müîß Using Development Authentication Strategy (JWT with test users)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:41 [33müîÑ AUTH_MODE changed: development ‚Üí auth0[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      17:13:41 [32müîê Using Auth0 Production Authentication Strategy (OAuth2/OIDC)[39m

      at Console.log (../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS unit __tests__/unit/routes/roles.validation.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/auth.sessions.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/auth.crud.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/users.crud.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "newuser@example.com",
        "first_name": "New",
        "last_name": "User",
        "role_id": 2
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: admin@example.com

      at log (routes/users.js:339:13)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "newuser@example.com",
        "first_name": "New",
        "last_name": "User"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: admin@example.com

      at log (routes/users.js:339:13)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "existing@example.com"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: admin@example.com

      at log (routes/users.js:339:13)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "user@example.com"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: admin@example.com

      at log (routes/users.js:339:13)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "user@example.com"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: admin@example.com

      at log (routes/users.js:339:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/services/auth.test.js
  ‚óè Console

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/roles.crud.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/auth-middleware-security.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/users.validation.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "existing@example.com"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: admin@example.com

      at log (routes/users.js:339:13)

    console.log
      [USERS POST] Reached validator stage

      at log (routes/users.js:337:13)

    console.log
      [USERS POST] Body: {
        "email": "user@example.com"
      }

      at log (routes/users.js:338:13)

    console.log
      [USERS POST] User: admin@example.com

      at log (routes/users.js:339:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/schema.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/config/permissions-loader.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/health.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/validators/type-coercion.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/users.relationships.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/routes/roles.relationships.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/validators/middleware.test.js
  ‚óè Console

    console.log
      [ValidationLoader] ‚úÖ Loaded validation rules v2.0.0

      at log (utils/validation-loader.js:30:13)

    console.log
      [ValidationLoader] üìã Loaded validation rules v2.0.0

      at Object.log (validators/body-validators.js:19:11)

    console.log
      [ValidationLoader] üìä Available operations: createUser, updateUser, createRole, updateRole, createCustomer, updateCustomer, createTechnician, updateTechnician, createWorkOrder, updateWorkOrder, createInvoice, updateInvoice, createContract, updateContract, createInventory, updateInventory

      at Object.log (validators/body-validators.js:20:11)

    console.log
      [ValidationLoader] üéØ Policy: {"email":{"tldValidation":"permissive","description":"Accept any TLD format - no fascist restrictions! üöÄ"}}

      at Object.log (validators/body-validators.js:21:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/validators/query-validators.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/services/query-builder-service.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/models/User.crud.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/app-config.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/models/User.validation.test.js
PASS unit __tests__/unit/models/Role.validation.test.js
PASS unit __tests__/unit/middleware/timeout.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/middleware/row-level-security.test.js
  ‚óè Console

    console.log
      [Permissions] ‚úÖ Configuration validation passed

      at log (config/permissions-loader.js:133:11)

    console.log
      [Permissions] ‚úÖ Loaded permission config from C:\Users\zarik\OneDrive\Desktop\TrossApp\config\permissions.json

      at log (config/permissions-loader.js:52:13)

    console.log
      [Permissions] üìä Roles: 5

      at log (config/permissions-loader.js:53:13)

    console.log
      [Permissions] üìä Resources: 9

      at log (config/permissions-loader.js:54:13)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/services/user-data.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/validators/param-validators.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/models/User.relationships.test.js
PASS unit __tests__/unit/utils/request-helpers.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/models/Role.crud.test.js
PASS unit __tests__/unit/services/audit-service.crud.test.js
PASS unit __tests__/unit/config/constants.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/middleware/rate-limit.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/services/pagination-service.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/services/schema-introspection.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/config/timeouts.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/validators/validation-logger.test.js
  ‚óè Console

    console.log
      [dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (../node_modules/dotenv/lib/main.js:142:11)

PASS unit __tests__/unit/models/User.rls.test.js
PASS unit __tests__/unit/models/Role.rls.test.js
PASS unit __tests__/unit/services/audit-service.queries.test.js
PASS unit __tests__/unit/services/audit-service.validation.test.js
PASS unit __tests__/unit/models/Role.relationships.test.js

Summary of all failing tests
FAIL __tests__/integration/customers-api.test.js
  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ POST /api/customers - Create Customer ‚Ä∫ should create customer with valid data as dispatcher

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 285 |[39m
     [90m 286 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 287 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 288 |[39m       expect(response[33m.[39mbody)[33m.[39mtoMatchObject({
     [90m 289 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 290 |[39m         data[33m:[39m expect[33m.[39mobjectContaining({[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:287:31)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ POST /api/customers - Create Customer ‚Ä∫ should reject duplicate email

    expect(received).toBe(expected) // Object.is equality

    Expected: 409
    Received: 500

    [0m [90m 331 |[39m
     [90m 332 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 333 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m409[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already exists'[39m)[33m;[39m
     [90m 335 |[39m     })[33m;[39m
     [90m 336 |[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:333:31)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ POST /api/customers - Create Customer ‚Ä∫ should trim whitespace from email

    expect(received).toBe(expected) // Object.is equality

    Expected: "trim-1763169187457@example.com"
    Received: "  trim-1763169187457@example.com  "

    [0m [90m 369 |[39m       [90m// Assert[39m
     [90m 370 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 371 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39memail)[33m.[39mtoBe(trimEmail)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 372 |[39m     })[33m;[39m
     [90m 373 |[39m   })[33m;[39m
     [90m 374 |[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:371:40)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ PATCH /api/customers/:id - Update Customer ‚Ä∫ should update multiple fields

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 400

    [0m [90m 426 |[39m
     [90m 427 |[39m       [90m// Assert[39m
    [31m[1m>[22m[39m[90m 428 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 429 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m 430 |[39m         phone[33m:[39m [32m'555-9999'[39m[33m,[39m
     [90m 431 |[39m         company_name[33m:[39m [32m'Multi-Update Company'[39m[33m,[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:428:31)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ PATCH /api/customers/:id - Update Customer ‚Ä∫ should trim whitespace from updated fields

    expect(received).toBe(expected) // Object.is equality

    Expected: "Trimmed Company"
    Received: "  Trimmed Company  "

    [0m [90m 475 |[39m       [90m// Assert[39m
     [90m 476 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 477 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mcompany_name)[33m.[39mtoBe([32m'Trimmed Company'[39m)[33m;[39m
     [90m     |[39m                                               [31m[1m^[22m[39m
     [90m 478 |[39m     })[33m;[39m
     [90m 479 |[39m   })[33m;[39m
     [90m 480 |[39m[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:477:47)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ DELETE /api/customers/:id - Delete Customer ‚Ä∫ should soft delete customer as manager

    expect(received).toMatchObject(expected)

    - Expected  - 1
    + Received  + 1

      Object {
    -   "message": StringContaining "deleted",
    +   "message": "Customer deactivated successfully",
        "success": true,
        "timestamp": Any<String>,
      }

    [0m [90m 519 |[39m       [90m// Assert[39m
     [90m 520 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 521 |[39m       expect(response[33m.[39mbody)[33m.[39mtoMatchObject({
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 522 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 523 |[39m         message[33m:[39m expect[33m.[39mstringContaining([32m'deleted'[39m)[33m,[39m
     [90m 524 |[39m         timestamp[33m:[39m expect[33m.[39many([33mString[39m)[33m,[39m[0m

      at Object.toMatchObject (__tests__/integration/customers-api.test.js:521:29)

  ‚óè Customers CRUD API - Integration Tests ‚Ä∫ RLS (Row-Level Security) - Customer Access ‚Ä∫ should not apply RLS filtering for admin role

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

    [0m [90m 581 |[39m       [90m// Assert[39m
     [90m 582 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 583 |[39m       expect(response[33m.[39mbody[33m.[39mrlsApplied)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 584 |[39m     })[33m;[39m
     [90m 585 |[39m
     [90m 586 |[39m     it([32m'should apply RLS filtering for dispatcher role (all_records policy)'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (__tests__/integration/customers-api.test.js:583:40)

FAIL __tests__/unit/models/Customer.rls.test.js
  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should apply RLS filter for customer role

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:267:22)

  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should not filter for technician+ (all_records)

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:290:22)

  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS when req not provided

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:305:22)

  ‚óè Customer Model - Row-Level Security ‚Ä∫ findAll() with RLS ‚Ä∫ should combine RLS with search and filters

    Failed to retrieve customers

    [0m [90m 280 |[39m         search[33m:[39m options[33m.[39msearch[33m,[39m
     [90m 281 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 282 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve customers'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 283 |[39m     }
     [90m 284 |[39m   }
     [90m 285 |[39m[0m

      at Customer.findAll (db/models/Customer.js:282:13)
      at Object.<anonymous> (__tests__/unit/models/Customer.rls.test.js:334:22)

FAIL __tests__/unit/models/Contract.rls.test.js
  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:231:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:246:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_contracts_only RLS policy (customer)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:258:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply null policy (technician - no access)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:272:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine customer RLS with search and filters

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:297:37)

  ‚óè Contract Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine null policy with filters (technician blocked)

    Failed to retrieve contracts

    [0m [90m 156 |[39m     } [36mcatch[39m (error) {
     [90m 157 |[39m       logger[33m.[39merror([32m'Error finding contracts'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve contracts'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 159 |[39m     }
     [90m 160 |[39m   }
     [90m 161 |[39m[0m

      at Contract.findAll (db/models/Contract.js:158:13)
      at Object.findAll (__tests__/unit/models/Contract.rls.test.js:321:37)

FAIL __tests__/unit/models/Invoice.rls.test.js
  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:231:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:246:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_invoices_only RLS policy (customer)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:258:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply null policy (technician - no access)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:272:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine customer RLS with search and filters

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:297:22)

  ‚óè Invoice Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine null policy with filters (technician blocked)

    Failed to retrieve invoices

    [0m [90m 181 |[39m     } [36mcatch[39m (error) {
     [90m 182 |[39m       logger[33m.[39merror([32m'Error finding invoices'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 183 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve invoices'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 184 |[39m     }
     [90m 185 |[39m   }
     [90m 186 |[39m[0m

      at Invoice.findAll (db/models/Invoice.js:183:13)
      at Object.<anonymous> (__tests__/unit/models/Invoice.rls.test.js:321:22)

FAIL __tests__/unit/models/WorkOrder.rls.test.js
  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:257:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:272:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_work_orders_only RLS policy (customer)

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:284:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply assigned_work_orders_only RLS policy (technician)

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:299:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine customer RLS with search and filters

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:324:22)

  ‚óè WorkOrder Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine technician RLS with search and filters

    Failed to retrieve work orders

    [0m [90m 184 |[39m     } [36mcatch[39m (error) {
     [90m 185 |[39m       logger[33m.[39merror([32m'Error finding work orders'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve work orders'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }
     [90m 189 |[39m[0m

      at WorkOrder.findAll (db/models/WorkOrder.js:186:13)
      at Object.<anonymous> (__tests__/unit/models/WorkOrder.rls.test.js:353:22)

FAIL __tests__/unit/models/Technician.rls.test.js
  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should work without RLS context

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:201:22)

  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply all_records RLS policy (no filtering)

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:216:22)

  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should apply own_record_only RLS policy

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:228:22)

  ‚óè Technician Model - RLS Tests ‚Ä∫ findAll() with RLS ‚Ä∫ should combine RLS with search and filters

    Failed to retrieve technicians

    [0m [90m 193 |[39m     } [36mcatch[39m (error) {
     [90m 194 |[39m       logger[33m.[39merror([32m'Error finding all technicians'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage[33m,[39m options })[33m;[39m
    [31m[1m>[22m[39m[90m 195 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve technicians'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 196 |[39m     }
     [90m 197 |[39m   }
     [90m 198 |[39m[0m

      at Technician.findAll (db/models/Technician.js:195:13)
      at Object.<anonymous> (__tests__/unit/models/Technician.rls.test.js:254:22)

FAIL __tests__/unit/models/Inventory.rls.test.js
  ‚óè Inventory Model - Row-Level Security ‚Ä∫ findAll with RLS ‚Ä∫ should fetch all inventory without filtering (null policy)

    Failed to retrieve inventory items

    [0m [90m 158 |[39m     } [36mcatch[39m (error) {
     [90m 159 |[39m       logger[33m.[39merror([32m'Error finding inventory items'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve inventory items'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 161 |[39m     }
     [90m 162 |[39m   }
     [90m 163 |[39m[0m

      at Inventory.findAll (db/models/Inventory.js:160:13)
      at Object.findAll (__tests__/unit/models/Inventory.rls.test.js:255:38)

  ‚óè Inventory Model - Row-Level Security ‚Ä∫ findAll with RLS ‚Ä∫ should fetch all inventory without req (backward compatibility)

    Failed to retrieve inventory items

    [0m [90m 158 |[39m     } [36mcatch[39m (error) {
     [90m 159 |[39m       logger[33m.[39merror([32m'Error finding inventory items'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve inventory items'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 161 |[39m     }
     [90m 162 |[39m   }
     [90m 163 |[39m[0m

      at Inventory.findAll (db/models/Inventory.js:160:13)
      at Object.findAll (__tests__/unit/models/Inventory.rls.test.js:270:38)

  ‚óè Inventory Model - Row-Level Security ‚Ä∫ findAll with RLS ‚Ä∫ should work with search and filters (no RLS interference)

    Failed to retrieve inventory items

    [0m [90m 158 |[39m     } [36mcatch[39m (error) {
     [90m 159 |[39m       logger[33m.[39merror([32m'Error finding inventory items'[39m[33m,[39m { error[33m:[39m error[33m.[39mmessage })[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m'Failed to retrieve inventory items'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 161 |[39m     }
     [90m 162 |[39m   }
     [90m 163 |[39m[0m

      at Inventory.findAll (db/models/Inventory.js:160:13)
      at Object.findAll (__tests__/unit/models/Inventory.rls.test.js:289:38)


Test Suites: 7 failed, 53 passed, 60 total
Tests:       36 failed, 1215 passed, 1251 total
Snapshots:   0 total
Time:        47.714 s
Ran all test suites in 2 projects.
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path C:\Users\zarik\OneDrive\Desktop\TrossApp\backend
npm error workspace backend@1.0.0
npm error location C:\Users\zarik\OneDrive\Desktop\TrossApp\backend
npm error command failed
npm error command C:\WINDOWS\system32\cmd.exe /d /s /c jest
